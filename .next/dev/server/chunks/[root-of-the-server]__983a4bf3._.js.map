{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/amrassal/Documents/Git-Projects/AtlasEgypt/helper/db-util.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\n\nexport function connectDatabase() {\n  const client = MongoClient.connect(\n    \"mongodb+srv://amrkhaledassal:AkA1292003@cluster0.bozkfl7.mongodb.net/AtlasEgypt?retryWrites=true&w=majority\",\n  );\n  return client;\n}\n\nexport async function InsertDocument(client, document, collection) {\n  const db = client.db();\n  const result = db.collection(collection).insertOne(document);\n  return result;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,SAAS;IACd,MAAM,SAAS,oKAAW,CAAC,OAAO,CAChC;IAEF,OAAO;AACT;AAEO,eAAe,eAAe,MAAM,EAAE,QAAQ,EAAE,UAAU;IAC/D,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,SAAS,GAAG,UAAU,CAAC,YAAY,SAAS,CAAC;IACnD,OAAO;AACT"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///Users/amrassal/Documents/Git-Projects/AtlasEgypt/pages/api/newsletter.js"],"sourcesContent":["import { connectDatabase, InsertDocument } from \"../../helper/db-util\";\n\nasync function handler(req,res){\n    const enteredEmail = req.body.email;\n    if(!enteredEmail || !enteredEmail.includes('@')){\n        res.status(422).json({message: \"Invalid email address.\"})\n        return;\n    }\n\n    if(req.method === \"POST\"){\n      let client;\n      try{\n        client = await connectDatabase();\n      }catch(error){\n        res.status(500).json({message: \"Could not connect to database.\"});\n        return;\n      }\n        try{\n            await InsertDocument(client, {email: enteredEmail}, \"newsletterEmails\");\n            res.status(201).json({message: \"Signed up successfully!\"});\n            client.close();\n        }catch(error){\n            res.status(500).json({message: \"Inserting data failed!\"});\n            return;\n        }\n        res.status(201).json({message: \"singed up successfully!\", email: enteredEmail});\n    }\n}\n\nexport default handler;"],"names":[],"mappings":";;;;AAAA;;AAEA,eAAe,QAAQ,GAAG,EAAC,GAAG;IAC1B,MAAM,eAAe,IAAI,IAAI,CAAC,KAAK;IACnC,IAAG,CAAC,gBAAgB,CAAC,aAAa,QAAQ,CAAC,MAAK;QAC5C,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAC,SAAS;QAAwB;QACvD;IACJ;IAEA,IAAG,IAAI,MAAM,KAAK,QAAO;QACvB,IAAI;QACJ,IAAG;YACD,SAAS,MAAM,IAAA,gIAAe;QAChC,EAAC,OAAM,OAAM;YACX,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAC,SAAS;YAAgC;YAC/D;QACF;QACE,IAAG;YACC,MAAM,IAAA,+HAAc,EAAC,QAAQ;gBAAC,OAAO;YAAY,GAAG;YACpD,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAC,SAAS;YAAyB;YACxD,OAAO,KAAK;QAChB,EAAC,OAAM,OAAM;YACT,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAC,SAAS;YAAwB;YACvD;QACJ;QACA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAC,SAAS;YAA2B,OAAO;QAAY;IACjF;AACJ;uCAEe"}}]
}