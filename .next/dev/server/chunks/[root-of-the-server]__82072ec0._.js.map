{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/amrassal/Documents/Git-Projects/AtlasEgypt/helper/db-util.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\n\nexport function connectDatabase() {\n  const client = MongoClient.connect(\n    \"mongodb+srv://amrkhaledassal:AkA1292003@cluster0.bozkfl7.mongodb.net/AtlasEgypt?retryWrites=true&w=majority\",\n  );\n  return client;\n}\n\nexport async function InsertDocument(client, document, collection) {\n  const db = client.db();\n  const result = db.collection(collection).insertOne(document);\n  return result;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,SAAS;IACd,MAAM,SAAS,oKAAW,CAAC,OAAO,CAChC;IAEF,OAAO;AACT;AAEO,eAAe,eAAe,MAAM,EAAE,QAAQ,EAAE,UAAU;IAC/D,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,SAAS,GAAG,UAAU,CAAC,YAAY,SAAS,CAAC;IACnD,OAAO;AACT"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///Users/amrassal/Documents/Git-Projects/AtlasEgypt/pages/api/contactus.js"],"sourcesContent":["import { connectDatabase , InsertDocument} from \"@/helper/db-util\";\n\nasync function handler(req, res){\n    const {name, email, message} = req.body;\n\n    if(req.method === 'POST'){\n\n        if(!email || !email.includes('@') || !name || name.trim() ==='' || !message || message.trim()=== ''){\n            return (\n                res.status(422).json({message: 'Invalid input.'})\n            )\n        }\n\n        const newMessage = {\n            email,\n            name,\n            message,\n        };\n\n        let client;\n        try{\n            client = await connectDatabase();\n        }catch(error){\n            res.status(500).json({message: 'Connecting to the database failed!'});\n            return;\n        }\n\n        try{\n            const result = await InsertDocument(client, newMessage, 'messages');\n            newMessage.id = result.insertedId;\n        }catch(error){\n            client.close;\n            res.status(500).json({message: 'Inserting message failed!'});\n            return;\n        }\n\n        res.status(201).json({message: 'Successfully stored message!', message: newMessage});\n    }\n\n}\n\n\nexport default handler;"],"names":[],"mappings":";;;;AAAA;;AAEA,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC3B,MAAM,EAAC,IAAI,EAAE,KAAK,EAAE,OAAO,EAAC,GAAG,IAAI,IAAI;IAEvC,IAAG,IAAI,MAAM,KAAK,QAAO;QAErB,IAAG,CAAC,SAAS,CAAC,MAAM,QAAQ,CAAC,QAAQ,CAAC,QAAQ,KAAK,IAAI,OAAM,MAAM,CAAC,WAAW,QAAQ,IAAI,OAAM,IAAG;YAChG,OACI,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAC,SAAS;YAAgB;QAEvD;QAEA,MAAM,aAAa;YACf;YACA;YACA;QACJ;QAEA,IAAI;QACJ,IAAG;YACC,SAAS,MAAM,IAAA,gIAAe;QAClC,EAAC,OAAM,OAAM;YACT,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAC,SAAS;YAAoC;YACnE;QACJ;QAEA,IAAG;YACC,MAAM,SAAS,MAAM,IAAA,+HAAc,EAAC,QAAQ,YAAY;YACxD,WAAW,EAAE,GAAG,OAAO,UAAU;QACrC,EAAC,OAAM,OAAM;YACT,OAAO,KAAK;YACZ,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAC,SAAS;YAA2B;YAC1D;QACJ;QAEA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAC,SAAS;YAAgC,SAAS;QAAU;IACtF;AAEJ;uCAGe"}}]
}